{{ define "main" }}
<div class="main-container">
    <main class="main-content">
        {{- /* 1. 过滤逻辑：只显示 type 为 post 的文章，排除掉"关于"、"友链"等页面 */ -}}
        {{- range (where .Site.RegularPages "Type" "post").GroupByDate "2006" -}}
        <div class="archives-group">
            <h2 class="archives-date section-title">
                <a href="{{ $.RelPermalink }}#{{ .Key }}">{{ .Key }}</a>
            </h2>
            <div class="article-list--compact">
                {{- range .Pages -}}
                    {{ partial "article-list/compact.html" . }}
                {{- end -}}
            </div>
        </div>
        {{- end -}}
    </main>
    
    {{- /* 2. 侧边栏修复：将 Scope 改为 "homepage"，强制加载主页的那些挂件 */ -}}
    <aside class="sidebar right-sidebar sticky">
        {{ partial "sidebar/right.html" (dict "Context" . "Scope" "homepage") }}
    </aside>
</div>
{{ end }}